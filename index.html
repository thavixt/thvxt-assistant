<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Personal Assistant</title>
    <link rel="stylesheet" href="dist/css/style.css">
    <!-- Chat plugin -->
    <link rel="stylesheet" href="dist/css/thvxt-assistant.css">
    <!-- Syntax highlighting - Google Code Prettify -->
    <link rel="stylesheet" href="dist/css/code-prettify.css">
</head>

<body onload="PR.prettyPrint()">
    <div id="chat-container"></div>

    <header>
        <h1 id="thvxtassistantthemodularjavascriptchatbot">Thvxt Assistant - The Modular Javascript Chatbot</h1>
        <hr>
    </header>

    <h2 id="description">Description</h2>

    <p>Thvxt Assistant is a browser-based chatbot written with vanilla ES6 code and
        <em>zero dependencies</em>.</p>

    <p>Features include:</p>
    <ul>
        <li>quick &amp; easy installation,</li>
        <li>custom styling and animations,</li>
        <li>voice synthesis (an voice recognition soon),</li>
        <li>modular, plugin-like
            <em>skills</em>.</li>
    </ul>

    <h2 id="installation">Installation</h2>

    <p>All you have to do is download and include
        <code>thvxt-assistant.js</code> and
        <code>thxt-assistant.css</code> in your HTML markup:</p>
    <pre class="prettyprint html language-html">&lt;!-- Css--&gt;
&lt;link rel="stylesheet" href="thvxt-assistant.css"&gt;

&lt;!-- Optional dependency --&gt;
&lt;script src="https://maps.googleapis.com/maps/api/js?key=&lt;YOUR_GOOGLE_MAPS_API_KEY&gt;"&gt;&lt;/script&gt;
&lt;!-- Javascript --&gt;
&lt;script src="thvxt-assistant.js"&gt;&lt;/script&gt; </pre>
    <p>Or link to the files directly:</p>
    <pre class="prettyprint html language-html">&lt;!-- Css--&gt;
&lt;link rel="stylesheet" href="https://raw.githubusercontent.com/thavixt/thvxt-assistant/master/css/thvxt-assistant.css"&gt;
&lt;!-- Javascript --&gt;
&lt;script src="https://raw.githubusercontent.com/thavixt/thvxt-assistant/master/js/thvxt-assistant.js"&gt;&lt;/script&gt; </pre>
    <p>The
        <em>Google Maps Javascript API</em> is an optional dependency. It's used for some default
        <em>skills</em>, but the plugin will work without it.</p>

    <p>Create an instance of Assistant:</p>
    <pre class="prettyprint javascript language-javascript">const assistant = new Assistant(root, config, skill);
    
// Or in a bit more detail:
const assistant = new Assistant(
    // Root div ID (the only required parameter)
    "chat-container",
    // Default config object
    // NOTE: If you overwrite part of the default config object,
    //       you have to include ALL of it's properties
    {
        // Name of the Assistant (default is 'Leah')
        name: "Emma",
        // Default answer (default)
        response: {
            text: "I don't know what to say :(",
            extra: "",
        },
        // Welcome message - triggers automatically on load (default)
        welcome: { 
            text: "Hi, ask me anything!",
            extra: "", 
        }, 
        // To disable:
        //welcome: false,
        // Delay before the Assistant answers, 
        // even if the response is ready. (default)
        delay: 500,
        // Speech options
        speech: {
            enabled: true,  // default
            rate: 1.2,      // default is 1
            volume: 0.8,    // default is 1
            // Index of the SpeechSynthesisVoice object to use
            // from all available voices on the device.
            // NOTE: you can always change it in 'Settings',
            // 0 will always be the device/OS default voice
            voice: 0,  // default
        },
        // Element IDs (default, use anything for custom CSS)
        elements: {
            thinker: "my-chat-thinker",
            messageList: "my-chat-messagelist",
            inputForm: "my-chat-inputarea",
            userInput: "my-chat-type",
            sendButton: "my-chat-send",
            recordButton: "my-chat-record",
            settingsButton: "my-chat-settings",
            settingsDiv: "my-chat-settingsContainer",
            voiceSelect: "my-chat-voiceSelect",
            voiceVolume: "my-chat-voiceVolume",
            voiceRate: "my-chat-voiceRate"
        },
        // CSS selectors for animation (default, use anything for custom animations)
        animations: { 
            userMessage: "revealUser", 
            assistantMessage: "revealAssistant" 
        }, 
        // Enable saving to and loading the settings from LocalStorage (default) 
        persistSettings: true,
    },
    // Array of predefined skill the Assistant is able to use
    [greeterSkill, navigationSkill, ...allOtherSkills]
);

// Initialize for use
assistant.init();

// From this point, the Assistant is ready to process input

// Debug 
console.log("Assistant: ", assistant); 

/** 
* TESTS 
*/ 
// Static response 
assistant.process("hi!", true).then(result => console.log(result)); 
// Location - async 
assistant.process("where am i?", true).then(result => console.log(result));
// Default response 
assistant.process("123wow", true).then(result => console.log(result)); 
// Dynamic URL response - can include location info which is async 
assistant.process("navigate to Shot Bar", true).then(result => console.log(result)); </pre>

    <p>IMPORTANT: If you overwrite any part of the default config object, you have to include ALL of it's properties. For example,
        if you were to overwrite an element's ID in the
        <code>elements</code> property, you'll have to include every field in the
        <code>elements</code> object.</p>

    <h2 id="skills">Skills</h2>

    <p>A
        <strong>skill</strong> is a single object that contains some
        <em>trigger phrases</em>, a
        <em>resolver function</em> and a unique name.</p>
    <p>
        <strong>
            <em>These objects will define all behavior used by the Assistant.</em>
        </strong>
    </p>

    <p>Example:</p>
    <pre class="prettyprint javascript language-javascript">const simonSaysSkill = {
        // Unique name of the skill
        name: "simons says",
        // Triggers are regular expressions to match against user input
        triggers: [/simon says (.*)/],
        // The resolver function runs whenever the input matches one of this skill's triggers
        resolver: (self, match, sentence) =&gt; new Promise((resolve) =&gt; {
            // Write any logic here ...
            let response = `'${match[1]}'`;
            // This Promise must resolve an object:
            resolve({
                // Required - response text to send back and synthesize
                text: response, 
                // Required - any valid HTML, can include links, images, video, etc 
                // (use an empty string instead of emitting it)
                extra: `&lt;a href="https://en.wikipedia.org/wiki/Simon_Says"&gt;Simon Says - Wikipedia&lt;/a&gt;`, 
                // Optional - only required if you don't get the expected result 
                success: true, // ('false' if the resolved object is not the intended response)
            });
        })
    } </pre>

    <p>The
        <code>resolver</code> function must have 3 parameters:</p>
    <ul>
        <li>
            <code>self</code> - the Assistant instance,
        </li>
        <li>
            <code>match</code> - the regex match result object,
        </li>
        <li>
            <code>sentence</code> - the user input text.
        </li>
    </ul>

    <p>The Assistant will only synthesize (speak) the
        <code>text</code> value of the resolved object. Any string value in the
        <code>extra</code> field will be included after the text response portion of the Assistant's reponse message. This is so
        you can include any extra content like images and links without the Assistant (trying to) read them out loud.</p>
    <p>The project contains some examples to include or expand on for your own use cases.</p>


    <h2 id="styling">Styling</h2>

    <p>To position the plugin at the bottom-right corner, use this snippet of CSS:</p>
    <pre class="prettyprint">#chat-container { 
    width: 20em; 
    height: 30em; 
    position: fixed; 
    bottom: 0%; 
    right: 0%; 
    margin-right: 4px; 
}</pre>

    <br>
    <h2 id="license">License</h2>

    <p>MIT</p>

    <!-- Syntax highlighting - Google Code Prettify -->
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <!-- Dependencies -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeDB_rnFeP2e19E98PD934sjURcGdEwNo&language=en"></script>
    <!-- Chat plugin -->
    <script defer src="dist/js/bundle.js"></script>
</body>

</html>